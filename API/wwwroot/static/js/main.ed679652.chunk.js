(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{40:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(32),s=n.n(c),o=(n(40),n(0));var i=function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("button",{className:"logoutButton",onClick:function(){localStorage.removeItem("token"),window.location.reload()},children:"Wyloguj si\u0119"})})},j=function(e){var t=e.username;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("h2",{children:["Witaj ",t,"!"]}),Object(o.jsxs)("h5",{children:["Nie jeste\u015b ",t,"? ",Object(o.jsx)(i,{})]})]})},u=n(5),l=n.n(u),d=n(10),b=n(4),O=n(35),p=n(12),h=function(e,t){switch(t.type){case"GET_TRANSACTIONS":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,transactions:t.payload});case"DELETE_TRANSACTION":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,transactions:e.transactions.filter((function(e){return e.id!==t.payload}))});case"ADD_TRANSACTION":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,transactions:[].concat(Object(O.a)(e.transactions),[t.payload])});case"TRANSACTION_ERROR":return Object(p.a)(Object(p.a)({},e),{},{error:t.payload});default:return e}},x=n(17),f=n.n(x),m={transactions:[],error:null},v=Object(r.createContext)(m),g=function(e){var t=e.children,n=Object(r.useReducer)(h,m),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(null),j=Object(b.a)(i,2),u=j[0],O=j[1];function p(){return(p=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/Expense/".concat(t));case 3:n=e.sent,O(!0),s({type:"GET_TRANSACTIONS",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function x(){return(x=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("api/Expense/".concat(t));case 3:s({type:"DELETE_TRANSACTION",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function g(){return(g=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,f.a.post("/api/Expense",t,n);case 4:r=e.sent,s({type:"ADD_TRANSACTION",payload:r.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(o.jsx)(v.Provider,{value:{transactions:c.transactions,error:c.error,loading:u,getTransactions:function(e){return p.apply(this,arguments)},deleteTransaction:function(e){return x.apply(this,arguments)},addTransaction:function(e){return g.apply(this,arguments)}},children:t})},N=function(){var e=Object(r.useContext)(v).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h4",{children:"Twoje Saldo:"}),Object(o.jsxs)("h1",{children:[e," PLN"]})]})},y=function(){var e=Object(r.useContext)(v).transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),n=(-1*e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0)).toFixed(2);return Object(o.jsxs)("div",{className:"inc-exp-container",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:"Przychody"}),Object(o.jsxs)("p",{id:"money-plus",className:"money plus",children:[t," PLN"]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:"Wydatki"}),Object(o.jsxs)("p",{id:"money-minus",className:"money minus",children:[n," PLN"]})]})]})},w=function(e){var t=e.transaction,n=Object(r.useContext)(v).deleteTransaction,a=t.amount<0?"-":"+";return Object(o.jsxs)("li",{className:t.amount<0?"minus":"plus",children:[t.text," ",Object(o.jsxs)("span",{children:[a,Math.abs(t.amount)," PLN"]}),Object(o.jsx)("button",{onClick:function(){return n(t.id)},className:"delete-btn",children:"x"})]})},k=n(67),S=function(){var e=Object(r.useContext)(v),t=e.transactions,n=e.getTransactions,a=e.loading,c=JSON.parse(localStorage.getItem("token"));return Object(r.useEffect)((function(){n(c.username)}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"Historia"}),a?Object(o.jsx)("ul",{className:"list",children:t.map((function(e){return Object(o.jsx)(w,{transaction:e},e.id)}))}):Object(o.jsx)(k.a,{animation:"grow",variant:"info"})]})},T=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(0),s=Object(b.a)(c,2),i=s[0],j=s[1],u=Object(r.useContext)(v).addTransaction,l=JSON.parse(localStorage.getItem("token"));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"Dodaj now\u0105 transakcj\u0119"}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={userId:+l.id,text:n,amount:+i};u(t)},children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{className:"transactionLabel",htmlFor:"text",children:"Nazwa"}),Object(o.jsx)("input",{required:!0,type:"text",value:n,onChange:function(e){return a(e.target.value)},placeholder:"Wprowad\u017a nazw\u0119"})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsxs)("label",{className:"transactionLabel",htmlFor:"amount",children:["Kwota ",Object(o.jsx)("br",{}),'(Je\u015bli chcesz doda\u0107 wydatek, przed kwot\u0105 wprowad\u017a minusa " - ")']}),Object(o.jsx)("input",{required:!0,type:"number",value:i,onChange:function(e){return j(e.target.value)},placeholder:"Wprowad\u017a kwot\u0119"})]}),Object(o.jsx)("button",{className:"btn",children:"Dodaj transakcj\u0119"})]})]})},C=n(13),A=n(3);function R(e){var t=e.setToken,n=Object(r.useState)(),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(),j=Object(b.a)(i,2),u=j[0],O=j[1],p=Object(r.useState)(),h=Object(b.a)(p,2),x=h[0],f=h[1],m=Object(r.useState)(!1),v=Object(b.a)(m,2),g=v[0],N=v[1],y=Object(A.e)();function w(e){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/Account/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(console.log(e),200===e.status)return e.json();f("nieprawid\u0142owe dane logowania")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){var e=Object(d.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),N(!0),e.next=4,w({username:c,password:u});case 4:r=e.sent,t(r),N(!1),y.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Zaloguj si\u0119"}),Object(o.jsxs)("form",{onSubmit:T,children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"login",children:Object(o.jsx)("p",{children:"Nazwa u\u017cytkownika"})}),Object(o.jsx)("input",{type:"text",onChange:function(e){return s(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("p",{children:"Has\u0142o"})}),Object(o.jsx)("input",{type:"password",onChange:function(e){return O(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{disabled:g,className:"btn",type:"submit",children:"Zaloguj si\u0119"})})]}),Object(o.jsxs)("h5",{children:["Nie masz konta? ",Object(o.jsx)(C.b,{to:"/register",children:"Zarejestuj si\u0119"})," "]}),x&&Object(o.jsx)("p",{className:"errorp",children:x})," ",Object(o.jsx)("br",{}),g&&Object(o.jsx)("div",{className:"center",children:Object(o.jsx)(k.a,{animation:"grow",variant:"info"})})]})}var E=function(e){var t=e.setToken,n=Object(r.useState)(),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(),j=Object(b.a)(i,2),u=j[0],O=j[1],p=Object(r.useState)(),h=Object(b.a)(p,2),x=h[0],f=h[1],m=Object(r.useState)(),v=Object(b.a)(m,2),g=v[0],N=v[1],y=Object(r.useState)(!1),w=Object(b.a)(y,2),S=w[0],T=w[1];Object(A.e)();function R(e){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/Account/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(200!==e.status&&N("Co\u015b posz\u0142o nie tak"),400!==e.status)return e.json();N("Nazwa uzytkownika jest zaj\u0119ta")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,n.preventDefault(),T(!0),(c.length<4||c.length>20)&&(N("Nazwa powinna mie\u0107 od 4 do 20 znak\xf3w"),r=!1),(u.length<4||u.length>20)&&(N("Has\u0142o powinno mie\u0107 od 4 do 20 znak\xf3w"),r=!1),u!==x&&(N("Has\u0142a musz\u0105 by\u0107 takie same"),r=!1),!0!==r){e.next=12;break}return e.next=9,R({username:c,password:u});case 9:a=e.sent,T(!1),t(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Zarejestruj si\u0119"}),Object(o.jsxs)("form",{onSubmit:I,children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"login",children:Object(o.jsx)("p",{children:"Nazwa u\u017cytkownika"})}),Object(o.jsx)("input",{type:"text",required:!0,onChange:function(e){return s(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("p",{children:"Has\u0142o"})}),Object(o.jsx)("input",{type:"password",required:!0,onChange:function(e){return O(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("p",{children:"Potwierd\u017a has\u0142o"})}),Object(o.jsx)("input",{type:"password",required:!0,onChange:function(e){return f(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"btn",type:"submit",children:"Zarejestruj si\u0119"})})]}),Object(o.jsxs)("h5",{children:["Masz ju\u017c konto? ",Object(o.jsx)(C.b,{to:"/",children:"Zaloguj si\u0119"})," "]})]}),g&&Object(o.jsx)("p",{className:"errorp",children:g}),S&&Object(o.jsx)("div",{className:"center",children:Object(o.jsx)(k.a,{animation:"grow",variant:"info"})})]})};var I=function(){var e=function(){var e=Object(r.useState)(function(){var e=localStorage.getItem("token"),t=JSON.parse(e);return null===t||void 0===t?void 0:t.token}()),t=Object(b.a)(e,2),n=t[0],a=t[1];return{setToken:function(e){void 0!==e&&(localStorage.setItem("token",JSON.stringify(e)),a(e.token))},token:n}}(),t=e.token,n=e.setToken,a=JSON.parse(localStorage.getItem("token"));return t?Object(o.jsxs)(g,{children:[Object(o.jsx)(j,{username:a.username}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(N,{}),Object(o.jsx)(y,{}),Object(o.jsx)(S,{}),Object(o.jsx)(T,{})]})]}):Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(C.a,{children:[Object(o.jsx)("h1",{children:"Expense Tracker "}),Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),Object(o.jsx)(A.a,{path:"/register",children:Object(o.jsx)(E,{setToken:n})}),Object(o.jsx)(A.a,{path:"/",exact:!0,render:function(e){return Object(o.jsx)(R,{setToken:n})}})]})})};s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(I,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.ed679652.chunk.js.map