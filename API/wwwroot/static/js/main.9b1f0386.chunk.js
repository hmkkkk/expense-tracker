(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),s=n.n(c),o=(n(45),n(1));var i=function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("button",{className:"logoutButton",onClick:function(){localStorage.removeItem("token"),window.location.reload()},children:"Wyloguj si\u0119"})})},l=function(e){var t=e.username;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("h2",{children:["Witaj ",t,"!"]}),Object(o.jsxs)("h5",{children:["Nie jeste\u015b ",t,"? ",Object(o.jsx)(i,{})]})]})},u=n(5),j=n.n(u),b=n(11),d=n(3),O=n(40),p=n(12),h=function(e,t){switch(t.type){case"GET_TRANSACTIONS":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,transactions:t.payload});case"DELETE_TRANSACTION":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,transactions:e.transactions.filter((function(e){return e.id!==t.payload}))});case"ADD_TRANSACTION":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,transactions:[].concat(Object(O.a)(e.transactions),[t.payload])});case"TRANSACTION_ERROR":return Object(p.a)(Object(p.a)({},e),{},{error:t.payload});default:return e}},x=n(20),m=n.n(x),f={transactions:[],error:null},v=Object(a.createContext)(f),g=function(e){var t=e.children,n=Object(a.useReducer)(h,f),r=Object(d.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(null),l=Object(d.a)(i,2),u=l[0],O=(l[1],Object(a.useState)(null)),p=Object(d.a)(O,2),x=p[0],g=p[1];function N(){return(N=Object(b.a)(j.a.mark((function e(t,n,a){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/Expense/".concat(t,"?month=").concat(n,"&year=").concat(a));case 3:r=e.sent,g(!0),s({type:"GET_TRANSACTIONS",payload:r.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function y(){return(y=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.delete("api/Expense/".concat(t));case 3:s({type:"DELETE_TRANSACTION",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function w(){return(w=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,m.a.post("/api/Expense",t,n);case 4:a=e.sent,s({type:"ADD_TRANSACTION",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(o.jsx)(v.Provider,{value:{transactions:c.transactions,error:c.error,loading:u,dbLoading:x,setDbLoading:g,getTransactions:function(e,t,n){return N.apply(this,arguments)},deleteTransaction:function(e){return y.apply(this,arguments)},addTransaction:function(e){return w.apply(this,arguments)}},children:t})},N=function(){var e=Object(a.useContext)(v).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h4",{children:"Twoje Saldo:"}),Object(o.jsxs)("h1",{children:[e," PLN"]})]})},y=function(){var e=Object(a.useContext)(v).transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),n=(-1*e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0)).toFixed(2);return Object(o.jsxs)("div",{className:"inc-exp-container",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:"Przychody"}),Object(o.jsxs)("p",{id:"money-plus",className:"money plus",children:[t," PLN"]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:"Wydatki"}),Object(o.jsxs)("p",{id:"money-minus",className:"money minus",children:[n," PLN"]})]})]})},w=function(e){var t=e.transaction,n=Object(a.useContext)(v).deleteTransaction,r=t.amount<0?"-":"+";return Object(o.jsxs)("li",{className:t.amount<0?"minus":"plus",children:[t.text," ",Object(o.jsxs)("span",{children:[r,Math.abs(t.amount)," PLN"]}),Object(o.jsx)("button",{onClick:function(){return n(t.id)},className:"delete-btn",children:"x"})]})},k=n(82),S=n(39),T=function(){var e=Object(a.useContext)(v),t=e.transactions,n=e.getTransactions,r=e.dbLoading,c=e.setDbLoading,s=JSON.parse(localStorage.getItem("token")),i=new Date,l=i.getMonth()+1,u=i.getFullYear(),j=[{value:1,label:"Styczen"},{value:2,label:"Luty"},{value:3,label:"Marzec"},{value:4,label:"Kwiecien"},{value:5,label:"Maj"},{value:6,label:"Czerwiec"},{value:7,label:"Lipiec"},{value:8,label:"Sierpie\u0144"},{value:9,label:"Wrzesie\u0144"},{value:10,label:"Pa\u017adziernik"},{value:11,label:"Listopad"},{value:12,label:"Grudzie\u0144"}],b=Object(a.useState)(l),O=Object(d.a)(b,2),p=O[0],h=O[1],x=Object(a.useState)(u),m=Object(d.a)(x,2),f=m[0],g=m[1];return Object(a.useEffect)((function(){n(s.username,l,u)}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"Historia"}),Object(o.jsxs)("div",{className:"wrapper",children:[Object(o.jsx)(S.a,{className:"test ml-1",placeholder:"Select Option",value:j.find((function(e){return e.value===p})),options:j,onChange:function(e){h(e.value)}}),Object(o.jsx)("input",{className:"yearInput test",type:"number",value:f,onChange:function(e){g(e.target.value)},placeholder:"Wprowad\u017a kwot\u0119"})]}),Object(o.jsx)("button",{onClick:function(e){e.preventDefault(),c(!1),n(s.username,p,f)},className:"btn",children:"Filtruj"}),r?Object(o.jsx)("ul",{className:"list",children:t.map((function(e){return Object(o.jsx)(w,{transaction:e},e.id)}))}):Object(o.jsx)(k.a,{animation:"grow",variant:"info"})]})},C=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(0),s=Object(d.a)(c,2),i=s[0],l=s[1],u=Object(a.useContext)(v).addTransaction,j=JSON.parse(localStorage.getItem("token"));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"Dodaj now\u0105 transakcj\u0119"}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={userId:+j.id,text:n,amount:+i};u(t)},children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{className:"transactionLabel",htmlFor:"text",children:"Nazwa"}),Object(o.jsx)("input",{required:!0,type:"text",value:n,onChange:function(e){return r(e.target.value)},placeholder:"Wprowad\u017a nazw\u0119"})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsxs)("label",{className:"transactionLabel",htmlFor:"amount",children:["Kwota ",Object(o.jsx)("br",{}),'(Je\u015bli chcesz doda\u0107 wydatek, przed kwot\u0105 wprowad\u017a minusa " - ")']}),Object(o.jsx)("input",{className:"moneyInput",required:!0,type:"number",value:i,onChange:function(e){return l(e.target.value)},placeholder:"Wprowad\u017a kwot\u0119"})]}),Object(o.jsx)("button",{className:"btn",children:"Dodaj transakcj\u0119"})]})]})},A=n(13),z=n(4);function R(e){var t=e.setToken,n=Object(a.useState)(),r=Object(d.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(),l=Object(d.a)(i,2),u=l[0],O=l[1],p=Object(a.useState)(),h=Object(d.a)(p,2),x=h[0],m=h[1],f=Object(a.useState)(!1),v=Object(d.a)(f,2),g=v[0],N=v[1],y=Object(z.e)();function w(e){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/Account/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(console.log(e),200===e.status)return e.json();m("nieprawid\u0142owe dane logowania")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){var e=Object(b.a)(j.a.mark((function e(n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),N(!0),e.next=4,w({username:c,password:u});case 4:a=e.sent,t(a),N(!1),y.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Zaloguj si\u0119"}),Object(o.jsxs)("form",{onSubmit:T,children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"login",children:Object(o.jsx)("p",{children:"Nazwa u\u017cytkownika"})}),Object(o.jsx)("input",{type:"text",onChange:function(e){return s(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("p",{children:"Has\u0142o"})}),Object(o.jsx)("input",{type:"password",onChange:function(e){return O(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{disabled:g,className:"btn",type:"submit",children:"Zaloguj si\u0119"})})]}),Object(o.jsxs)("h5",{children:["Nie masz konta? ",Object(o.jsx)(A.b,{to:"/register",children:"Zarejestuj si\u0119"})," "]}),x&&Object(o.jsx)("p",{className:"errorp",children:x})," ",Object(o.jsx)("br",{}),g&&Object(o.jsx)("div",{className:"center",children:Object(o.jsx)(k.a,{animation:"grow",variant:"info"})})]})}var I=function(e){var t=e.setToken,n=Object(a.useState)(),r=Object(d.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(),l=Object(d.a)(i,2),u=l[0],O=l[1],p=Object(a.useState)(),h=Object(d.a)(p,2),x=h[0],m=h[1],f=Object(a.useState)(),v=Object(d.a)(f,2),g=v[0],N=v[1],y=Object(a.useState)(!1),w=Object(d.a)(y,2),S=w[0],T=w[1];Object(z.e)();function C(e){return R.apply(this,arguments)}function R(){return(R=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/Account/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(200!==e.status&&N("Co\u015b posz\u0142o nie tak"),400!==e.status)return e.json();N("Nazwa uzytkownika jest zaj\u0119ta")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){var e=Object(b.a)(j.a.mark((function e(n){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!0,n.preventDefault(),T(!0),(c.length<4||c.length>20)&&(N("Nazwa powinna mie\u0107 od 4 do 20 znak\xf3w"),a=!1),(u.length<4||u.length>20)&&(N("Has\u0142o powinno mie\u0107 od 4 do 20 znak\xf3w"),a=!1),u!==x&&(N("Has\u0142a musz\u0105 by\u0107 takie same"),a=!1),!0!==a){e.next=12;break}return e.next=9,C({username:c,password:u});case 9:r=e.sent,T(!1),t(r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Zarejestruj si\u0119"}),Object(o.jsxs)("form",{onSubmit:I,children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"login",children:Object(o.jsx)("p",{children:"Nazwa u\u017cytkownika"})}),Object(o.jsx)("input",{type:"text",required:!0,onChange:function(e){return s(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("p",{children:"Has\u0142o"})}),Object(o.jsx)("input",{type:"password",required:!0,onChange:function(e){return O(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("p",{children:"Potwierd\u017a has\u0142o"})}),Object(o.jsx)("input",{type:"password",required:!0,onChange:function(e){return m(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"btn",type:"submit",children:"Zarejestruj si\u0119"})})]}),Object(o.jsxs)("h5",{children:["Masz ju\u017c konto? ",Object(o.jsx)(A.b,{to:"/",children:"Zaloguj si\u0119"})," "]})]}),g&&Object(o.jsx)("p",{className:"errorp",children:g}),S&&Object(o.jsx)("div",{className:"center",children:Object(o.jsx)(k.a,{animation:"grow",variant:"info"})})]})};var F=function(){var e=function(){var e=Object(a.useState)(function(){var e=localStorage.getItem("token"),t=JSON.parse(e);return null===t||void 0===t?void 0:t.token}()),t=Object(d.a)(e,2),n=t[0],r=t[1];return{setToken:function(e){void 0!==e&&(localStorage.setItem("token",JSON.stringify(e)),r(e.token))},token:n}}(),t=e.token,n=e.setToken,r=JSON.parse(localStorage.getItem("token"));return t?Object(o.jsxs)(g,{children:[Object(o.jsx)(l,{username:r.username}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(N,{}),Object(o.jsx)(y,{}),Object(o.jsx)(T,{}),Object(o.jsx)(C,{})]})]}):Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(A.a,{children:[Object(o.jsx)("h1",{children:"Notatnik wydatk\xf3w"}),Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),Object(o.jsx)(z.a,{path:"/register",children:Object(o.jsx)(I,{setToken:n})}),Object(o.jsx)(z.a,{path:"/",exact:!0,render:function(e){return Object(o.jsx)(R,{setToken:n})}})]})})};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(F,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.9b1f0386.chunk.js.map