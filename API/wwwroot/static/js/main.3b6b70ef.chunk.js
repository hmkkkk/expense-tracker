(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{38:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(31),s=n.n(c),o=(n(38),n(0));var i=function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("button",{className:"logoutButton",onClick:function(){localStorage.removeItem("token"),window.location.reload()},children:"Wyloguj si\u0119"})})},j=function(e){var t=e.username;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("h2",{children:["Witaj ",t,"!"]}),Object(o.jsxs)("h5",{children:["Nie jeste\u015b ",t,"? ",Object(o.jsx)(i,{})]})]})},u=n(4),l=n.n(u),d=n(10),b=n(5),p=n(33),O=n(11),h=function(e,t){switch(t.type){case"GET_TRANSACTIONS":return Object(O.a)(Object(O.a)({},e),{},{loading:!1,transactions:t.payload});case"DELETE_TRANSACTION":return Object(O.a)(Object(O.a)({},e),{},{transactions:e.transactions.filter((function(e){return e.id!==t.payload}))});case"ADD_TRANSACTION":return Object(O.a)(Object(O.a)({},e),{},{transactions:[].concat(Object(p.a)(e.transactions),[t.payload])});case"TRANSACTION_ERROR":return Object(O.a)(Object(O.a)({},e),{},{error:t.payload});default:return e}},x=n(17),f=n.n(x),m={transactions:[],error:null,loading:!0},v=Object(r.createContext)(m),y=function(e){var t=e.children,n=Object(r.useReducer)(h,m),a=Object(b.a)(n,2),c=a[0],s=a[1];function i(){return(i=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/Expense/".concat(t));case 3:n=e.sent,s({type:"GET_TRANSACTIONS",payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function j(){return(j=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("api/Expense/".concat(t));case 3:s({type:"DELETE_TRANSACTION",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function u(){return(u=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,f.a.post("/api/Expense",t,n);case 4:r=e.sent,s({type:"ADD_TRANSACTION",payload:r.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(o.jsx)(v.Provider,{value:{transactions:c.transactions,error:c.error,loading:c.loading,getTransactions:function(e){return i.apply(this,arguments)},deleteTransaction:function(e){return j.apply(this,arguments)},addTransaction:function(e){return u.apply(this,arguments)}},children:t})},N=function(){var e=Object(r.useContext)(v).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h4",{children:"Twoje Saldo:"}),Object(o.jsxs)("h1",{children:[e," PLN"]})]})},g=function(){var e=Object(r.useContext)(v).transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),n=(-1*e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0)).toFixed(2);return Object(o.jsxs)("div",{className:"inc-exp-container",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:"Przychody"}),Object(o.jsxs)("p",{id:"money-plus",className:"money plus",children:[t," PLN"]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:"Wydatki"}),Object(o.jsxs)("p",{id:"money-minus",className:"money minus",children:[n," PLN"]})]})]})},w=function(e){var t=e.transaction,n=Object(r.useContext)(v).deleteTransaction,a=t.amount<0?"-":"+";return Object(o.jsxs)("li",{className:t.amount<0?"minus":"plus",children:[t.text," ",Object(o.jsxs)("span",{children:[a,Math.abs(t.amount)," PLN"]}),Object(o.jsx)("button",{onClick:function(){return n(t.id)},className:"delete-btn",children:"x"})]})},k=function(){var e=Object(r.useContext)(v),t=e.transactions,n=e.getTransactions,a=JSON.parse(localStorage.getItem("token"));return Object(r.useEffect)((function(){n(a.username)}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"Historia"}),Object(o.jsx)("ul",{className:"list",children:t.map((function(e){return Object(o.jsx)(w,{transaction:e},e.id)}))})]})},T=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(0),s=Object(b.a)(c,2),i=s[0],j=s[1],u=Object(r.useContext)(v).addTransaction,l=JSON.parse(localStorage.getItem("token"));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"Dodaj now\u0105 transakcj\u0119"}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={userId:+l.id,text:n,amount:+i};u(t)},children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{className:"transactionLabel",htmlFor:"text",children:"Nazwa"}),Object(o.jsx)("input",{type:"text",value:n,onChange:function(e){return a(e.target.value)},placeholder:"Wprowad\u017a nazw\u0119"})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsxs)("label",{className:"transactionLabel",htmlFor:"amount",children:["Kwota ",Object(o.jsx)("br",{}),'(Je\u015bli chcesz doda\u0107 wydatek, przed kwot\u0105 wprowad\u017a minusa " - ")']}),Object(o.jsx)("input",{type:"number",value:i,onChange:function(e){return j(e.target.value)},placeholder:"Wprowad\u017a kwot\u0119"})]}),Object(o.jsx)("button",{className:"btn",children:"Dodaj transakcj\u0119"})]})]})},S=n(12),C=n(2);function A(e){var t=e.setToken,n=Object(r.useState)(),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(),j=Object(b.a)(i,2),u=j[0],p=j[1],O=Object(r.useState)(),h=Object(b.a)(O,2),x=h[0],f=h[1],m=Object(C.e)();function v(e){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/Account/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(console.log(e),200===e.status)return e.json();f("nieprawid\u0142owe dane logowania")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(){var e=Object(d.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,v({username:c,password:u});case 3:r=e.sent,t(r),m.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Zaloguj si\u0119"}),Object(o.jsxs)("form",{onSubmit:N,children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"login",children:Object(o.jsx)("p",{children:"Nazwa u\u017cytkownika"})}),Object(o.jsx)("input",{type:"text",onChange:function(e){return s(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("p",{children:"Has\u0142o"})}),Object(o.jsx)("input",{type:"password",onChange:function(e){return p(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"btn",type:"submit",children:"Zaloguj si\u0119"})})]}),Object(o.jsxs)("h5",{children:["Nie masz konta? ",Object(o.jsx)(S.b,{to:"/register",children:"Zarejestuj si\u0119"})," "]}),x&&Object(o.jsx)("p",{className:"errorp",children:x})]})}var R=function(e){var t=e.setToken,n=Object(r.useState)(),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(),j=Object(b.a)(i,2),u=j[0],p=j[1],O=Object(r.useState)(),h=Object(b.a)(O,2),x=h[0],f=h[1],m=Object(r.useState)(),v=Object(b.a)(m,2),y=v[0],N=v[1];Object(C.e)();function g(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/Account/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(200!==e.status&&N("Co\u015b posz\u0142o nie tak"),400!==e.status)return e.json();N("Nazwa uzytkownika jest zaj\u0119ta")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,n.preventDefault(),(c.length<4||c.length>20)&&(N("Nazwa powinna mie\u0107 od 4 do 20 znak\xf3w"),r=!1),(u.length<4||u.length>20)&&(N("Has\u0142o powinno mie\u0107 od 4 do 20 znak\xf3w"),r=!1),u!==x&&(N("Has\u0142a musz\u0105 by\u0107 takie same"),r=!1),!0!==r){e.next=10;break}return e.next=8,g({username:c,password:u});case 8:a=e.sent,t(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Zarejestruj si\u0119"}),Object(o.jsxs)("form",{onSubmit:k,children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"login",children:Object(o.jsx)("p",{children:"Nazwa u\u017cytkownika"})}),Object(o.jsx)("input",{type:"text",required:!0,onChange:function(e){return s(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("p",{children:"Has\u0142o"})}),Object(o.jsx)("input",{type:"password",required:!0,onChange:function(e){return p(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("p",{children:"Potwierd\u017a has\u0142o"})}),Object(o.jsx)("input",{type:"password",required:!0,onChange:function(e){return f(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"btn",type:"submit",children:"Zarejestruj si\u0119"})})]}),Object(o.jsxs)("h5",{children:["Masz ju\u017c konto? ",Object(o.jsx)(S.b,{to:"/",children:"Zaloguj si\u0119"})," "]})]}),y&&Object(o.jsx)("p",{className:"errorp",children:y})]})};var E=function(){var e=function(){var e=Object(r.useState)(function(){var e=localStorage.getItem("token"),t=JSON.parse(e);return null===t||void 0===t?void 0:t.token}()),t=Object(b.a)(e,2),n=t[0],a=t[1];return{setToken:function(e){void 0!==e&&(localStorage.setItem("token",JSON.stringify(e)),a(e.token))},token:n}}(),t=e.token,n=e.setToken,a=JSON.parse(localStorage.getItem("token"));return t?Object(o.jsxs)(y,{children:[Object(o.jsx)(j,{username:a.username}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(N,{}),Object(o.jsx)(g,{}),Object(o.jsx)(k,{}),Object(o.jsx)(T,{})]})]}):Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(S.a,{children:[Object(o.jsx)("h1",{children:"Expense Tracker "}),Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),Object(o.jsx)(C.a,{path:"/register",children:Object(o.jsx)(R,{setToken:n})}),Object(o.jsx)(C.a,{path:"/",exact:!0,render:function(e){return Object(o.jsx)(A,{setToken:n})}})]})})};s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(E,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.3b6b70ef.chunk.js.map